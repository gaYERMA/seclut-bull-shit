!(function () {
  var e,
    n,
    t =
      '\n        <div class="well-path-widget">\n            <div class="well-path-widget-row">\n                <div class="well-path-widget-header">{header}</div>\n                <div class="well-path-widget-close">\n                    <img src="{close_btn_src}" />\n                </div>\n            </div>\n            <div class="well-path-widget-row">\n                <div class="well-path-widget-body">{body}</div>\n                <div class="well-path-widget-links">{links}</div>\n            </div>\n        </div>\n    ',
    l = '<div class="well-path-widget-link-row">{links}</div>',
    a =
      '<div class="well-path-widget-link-wrap"><a href="{href}" target="_blank">{label}</a></div>',
    d = function () {
      e.remove(),
        document.removeEventListener("click", w),
        console.log("widget removed");
    },
    w = function (e) {
      "A" == e.target.nodeName &&
        -1 !=
          e.target.parentElement.className.indexOf(
            "well-path-widget-link-wrap"
          ) &&
        (console.log("cta clicked"),
        chrome.runtime.sendMessage({
          source: "well-path-widget",
          action: "ctaClicked",
          label: e.target.innerText,
          link: e.target.href.replace("mailto:", ""),
        }),
        d()),
        "IMG" == e.target.nodeName &&
          -1 !=
            e.target.parentElement.className.indexOf(
              "well-path-widget-close"
            ) &&
          (console.log("close button clicked"),
          chrome.runtime.sendMessage({
            source: "well-path-widget",
            action: "closed",
          }),
          d());
    };
  -1 == window.location.href.indexOf("securly.com") &&
    (function () {
      chrome.runtime.onMessage.addListener((o, p) => {
        if (
          (console.debug("wpw msg received", o, p),
          "object" == typeof o &&
            void 0 !== o.action &&
            void 0 !== o.source &&
            "well-path-widget" == o.source)
        )
          switch (o.action) {
            case "display":
              if (void 0 === o.data) return;
              !(function (d) {
                ((n = document.createElement("style")).textContent =
                  "\n        .well-path-widget-wrapper {\n            position: fixed;\n            top: 0;\n            left: 0;\n            /* max z-index i.e. 32 bit signed int*/\n            z-index: 2147483647; \n            /* specified again to counter any possible max z-index of website and ensure widget shows on top*/\n            z-index: 2147483648; \n            background-color: #ffffff;\n            width: 100%;\n            font-size: 13px;\n            font-family: Arial;\n            color: #333333;\n            display: block;\n            box-shadow: 0 2px 3px 0 #dbe6f0;\n        }\n\n        .well-path-widget-wrapper div {\n            display: block;\n        }\n\n        .well-path-widget {\n            position: relative;\n            padding: 8px 15px;\n        }\n\n        .well-path-widget-row > div {\n            display: inline-block;\n            vertical-align: top;\n        }\n\n        .well-path-widget-row * {\n            line-height: initial;\n            letter-spacing: normal;\n            font-stretch: normal;\n        }\n\n        .well-path-widget .well-path-widget-close {\n            text-align: right;\n            width: 4.5%;\n            min-width: 25px;\n        }\n\n        .well-path-widget .well-path-widget-close img {\n            cursor: pointer;\n        }\n\n        .well-path-widget .well-path-widget-header {\n            color: #171b1f;\n            width: 95%;\n            max-width: calc(100% - 40px);\n            font-family: Metropolis Medium;\n            font-weight: 500;\n            font-size: 20px;\n            line-height: 32px;\n        }\n\n        .well-path-widget .well-path-widget-body {\n            line-height: 22px;\n            font-family: 'Metropolis Regular';\n            font-size: 13px;\n            color: grey;\n            padding-top: 5px;\n            width: 60%;\n        }\n\n        .well-path-widget .well-path-widget-links {\n            width: calc(39.5% - 15px);\n            vertical-align: top;\n            padding: 5px 0 0 15px;\n        }\n\n        .well-path-widget .well-path-widget-links .well-path-widget-link-wrap {\n            padding: 0 15px 5px 0px;\n            display: inline-block;\n            width: calc(50% - 15px);\n            min-width: 75px;\n            vertical-align: top;\n        }\n\n        .well-path-widget .well-path-widget-links .well-path-widget-link-row:last-child .well-path-widget-link-wrap {\n            padding-bottom: 0px;\n        }\n\n        .well-path-widget .well-path-widget-links a,\n        .well-path-widget .well-path-widget-links a:hover,\n        .well-path-widget .well-path-widget-links a:focus,\n        .well-path-widget .well-path-widget-links a:active {\n            color: #0073e6;\n            font-family: 'Metropolis Semi Bold';\n            font-weight: 600;\n            font-size: 14px;\n            line-height: 20px;\n            text-decoration: none;\n            display: initial;\n        }\n\n        @media (max-width: 768px) {\n            .well-path-widget .well-path-widget-body,\n            .well-path-widget .well-path-widget-links {\n                width: 100%;\n            }\n\n            .well-path-widget .well-path-widget-links {\n                padding: 10px 0 0 0;\n            }\n        \n            .well-path-widget .well-path-widget-links .well-path-widget-link-wrap {\n                padding: 0 15px 5px 0;\n                width: 100%;\n            }\n\n            .well-path-widget .well-path-widget-links .well-path-widget-link-row:last-child .well-path-widget-link-wrap {\n                padding: 0 15px 5px 0;\n            }\n\n            .well-path-widget .well-path-widget-links .well-path-widget-link-row:last-child .well-path-widget-link-wrap:last-child {\n                padding-bottom: 0px;\n            }\n        }\n    "),
                  document.head.appendChild(n),
                  (widgetLinks = "");
                var o = "";
                for (i = 0; i < d.links.length; i++) {
                  var p = d.links[i],
                    s = void 0 !== p.email ? "mailto:" + p.email : p.url;
                  (o += a.replace("{href}", s).replace("{label}", p.label)),
                    i % 2 == 1 &&
                      ((widgetLinks += l.replace("{links}", o)), (o = ""));
                }
                o && (widgetLinks += l.replace("{links}", o)),
                  (widgetHtml = t
                    .replace(
                      "{close_btn_src}",
                      chrome.extension.getURL("icon-16-px-close.svg")
                    )
                    .replace("{header}", d.header)
                    .replace("{body}", d.body)
                    .replace("{links}", widgetLinks)),
                  ((e = document.createElement("div")).className =
                    "well-path-widget-wrapper"),
                  (e.innerHTML = widgetHtml),
                  document.body.appendChild(e),
                  document.body.insertBefore(e, document.body.firstChild),
                  console.log("widget displayed"),
                  document.addEventListener("click", w);
              })(o.data);
              break;
            case "remove":
              d();
          }
      }),
        chrome.runtime.sendMessage({
          source: "well-path-widget",
          action: "ready",
        });
      var o = document.createElement("link");
      (o.rel = "stylesheet"),
        (o.href = chrome.extension.getURL("fonts/Metropolis.css")),
        document.head.appendChild(o);
    })();
})();
